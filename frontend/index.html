<!doctype html>
<html><head><meta charset="utf-8"><title>SecureWipe</title></head><body>
<h1>SecureWipe â€” Agent UI</h1>
<label>Device/file: <input id="target" value=""/></label><br/>
<label>Profile: <select id="profile"><option>quick</option><option>secure</option></select></label><br/>
<label>Email: <input id="email"/></label><br/>
<label><input id="force" type="checkbox"/> Force (raw device ops)</label><br/>
<button id="wipe">Wipe Now</button>
<pre id="status">idle</pre>
<pre id="jobs">[]</pre>
<script>
async function getJobs(){ const r=await fetch('/jobs'); document.getElementById('jobs').textContent=JSON.stringify(await r.json(),null,2); }
document.getElementById('wipe').onclick = async ()=>{
  const payload = { device_path: document.getElementById('target').value, profile: document.getElementById('profile').value, email: document.getElementById('email').value, force: document.getElementById('force').checked };
  const resp = await fetch('/wipe', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
  const j = await resp.json();
  document.getElementById('status').textContent = 'Job queued: '+j.job_id;
  const iv = setInterval(async ()=>{ await getJobs(); const jobs = await (await fetch('/jobs')).json(); const job = jobs.find(x=>x.id===j.job_id); if(job){ document.getElementById('status').textContent = JSON.stringify(job,null,2); if(job.status==='finished'||job.status==='failed'){ clearInterval(iv); } } },2000);
};
getJobs();
</script>
</body></html>
